<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PontoView • Orientações</title>

  <!-- Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800;900&display=swap" rel="stylesheet"/>

  <!-- Material Symbols -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,650,0,0" />

  <style>
    :root{
      --ink:#0b1626;

      --topA:#0b2a44;
      --topB:#2c6aa3;
      --topC:#0f3d63;

      --pad: clamp(14px, 1.8vw, 26px);
      --gap: clamp(12px, 1.4vw, 18px);

      --panel:#e7edf5;
      --card: rgba(255,255,255,.78);
      --line: rgba(210,222,238,.95);

      --radius: clamp(24px, 2.2vw, 36px);
      --footerH: clamp(54px, 6vh, 78px);

      --ease: cubic-bezier(.2,.8,.2,1);
      --anim: 520ms;

      --dividerGrad: linear-gradient(90deg,
        rgba(44,106,163,0) 0%,
        rgba(44,106,163,.9) 18%,
        rgba(15,61,99,.95) 50%,
        rgba(44,106,163,.9) 82%,
        rgba(44,106,163,0) 100%
      );

      --bad:#ef4444;
      --badBg: rgba(239,68,68,.12);
      --badLine: rgba(239,68,68,.24);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
      background:#fff;
      overflow:hidden;
    }

    .pvShell{
      width:100vw;
      height:100vh;
      display:flex;
      flex-direction:column;
      min-height:0;
      background:#fff;
    }

    /* ================= HEADER ================= */
    .pvHeader{
      position:relative;
      background: linear-gradient(180deg, var(--topB) 0%, var(--topC) 42%, var(--topA) 100%);
      color:#fff;
      padding: clamp(14px, 1.8vw, 22px) var(--pad);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:var(--gap);
      flex:0 0 auto;
      min-width:0;
      border-bottom: 1px solid rgba(255,255,255,.12);
      box-shadow: inset 0 -1px 0 rgba(255,255,255,.18);
    }
    .pvHeader::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(900px 120px at 50% 0%, rgba(255,255,255,.22), rgba(255,255,255,0) 65%),
        linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,0) 42%);
      opacity:.95;
    }

    .pvHeaderLeft{position:relative; z-index:1;}
    .pvHeaderLeft{
      display:flex;
      align-items:center;
      gap: clamp(12px, 1.5vw, 18px);
      min-width:0;
      flex:1 1 auto;
    }

    .pvIconBadge{
      width: clamp(44px, 4.2vw, 64px);
      height: clamp(44px, 4.2vw, 64px);
      border-radius: 18px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.24);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.20), 0 14px 28px rgba(0,0,0,.14);
      backdrop-filter: blur(10px);
      display:grid;
      place-items:center;
      flex:0 0 auto;
      color:#fff;
    }
    .pvIconBadge .material-symbols-outlined{
      font-size: 34px;
      line-height: 1;
      color:#fff;
      font-variation-settings:'FILL' 0,'wght' 650,'GRAD' 0,'opsz' 24;
      opacity:.98;
    }

    .pvTitles{display:flex; flex-direction:column; gap:6px; min-width:0;}
    .pvTitle{
      margin:0;
      font-size: clamp(18px, 2.1vw, 34px);
      font-weight:900;
      letter-spacing:.06em;
      text-transform:uppercase;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      line-height:1.02;
    }

    /* ================= MAIN ================= */
    .pvMain{
      flex:1 1 auto;
      min-height:0;
      padding: var(--pad);
      display:flex;
      overflow:hidden;
      background:#fff;
    }

    .panel{
      width:100%;
      min-height:0;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(231,237,245,1), rgba(223,232,244,1));
      padding: clamp(12px, 1.4vw, 18px);
      overflow:hidden;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.45);
      display:grid;
      grid-template-columns: 1fr;
      gap: var(--gap);
      align-items:stretch;
    }

    .card{
      border-radius: var(--radius);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:0;
      background: var(--card);
      border: 1px solid var(--line);
      box-shadow: 0 12px 26px rgba(2,10,23,.10);
      backdrop-filter: blur(7px);
      position:relative; /* palco pro offline overlay */
    }

    .cardHeader{
      padding: clamp(16px, 1.8vw, 22px);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex:0 0 auto;
      min-width:0;
      background: transparent;
    }
    .cardHeader .label{
      font-size: 12px;
      font-weight: 900;
      letter-spacing:.14em;
      text-transform: uppercase;
      color:#3b4b62;
      white-space:nowrap;
      min-width:0;
      overflow:hidden;
      text-overflow:ellipsis;
      opacity:.95;
    }
    .toggleDots{display:flex; gap:8px; align-items:center;}
    .tdot{
      width:10px; height:10px; border-radius:999px;
      background:#c9d7ea;
      transition: all 420ms var(--ease);
    }
    .tdot.active{background:#2d76b9; width:22px;}

    .cardBody{
      flex:1 1 auto;
      min-height:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: clamp(18px, 2.2vw, 30px);
      overflow:hidden;
    }

    .pvMsgBox{ width:min(1200px, 92%); text-align:center; }
    .pvMsgPrimary{
      margin:0;
      font-weight: 900;
      color: var(--ink);
      font-size: clamp(30px, 4.2vw, 60px);
      line-height: 1.08;
      letter-spacing: -0.02em;
      opacity: 1;
      transform: translateY(0);
      filter: blur(0px);
      transition: opacity var(--anim) var(--ease), transform var(--anim) var(--ease), filter var(--anim) var(--ease);
    }
    .pvMsgSecondary{
      margin: 12px 0 0;
      font-weight: 900;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: #3b4b62;
      font-size: clamp(12px, 1.8vw, 18px);
      opacity: .72;
      transition: opacity var(--anim) var(--ease), transform var(--anim) var(--ease), filter var(--anim) var(--ease);
    }

    .pvFadeOut .pvMsgPrimary,
    .pvFadeOut .pvMsgSecondary{
      opacity: 0;
      transform: translateY(6px);
      filter: blur(1px);
    }

    /* progress interno */
    .progressWrap{
      width:min(980px, 78%);
      margin: 18px auto 0;
    }
    .divider{
      height: 4px;
      border-radius: 999px;
      background: var(--dividerGrad);
      position:relative;
      overflow:hidden;
    }
    .barFill{
      position:absolute;
      inset:0;
      width:0%;
      background: linear-gradient(90deg, rgba(255,255,255,.16), rgba(255,255,255,.38));
      mix-blend-mode: screen;
      border-radius: 999px;
      transition: width 120ms linear;
      transform-origin:left center;
    }

    /* ===== OFFLINE OVERLAY ===== */
    .pvOffline{
      position:absolute;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: var(--pad);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 5;
    }
    .pvOfflineCard{
      width: min(980px, 92%);
      border-radius: 20px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.86);
      box-shadow: 0 14px 40px rgba(0,0,0,.10);
      padding: clamp(18px, 2.2vw, 30px);
      display:flex;
      gap: 18px;
      align-items:flex-start;
      backdrop-filter: blur(8px);
    }
    .pvOfflineIcon{
      width: 54px; height: 54px;
      border-radius: 16px;
      background: var(--badBg);
      border:1px solid var(--badLine);
      display:grid;
      place-items:center;
      flex:0 0 auto;
      color: var(--bad);
    }
    .pvOfflineIcon .material-symbols-outlined{
      font-size: 28px;
      font-variation-settings:'FILL' 0,'wght' 650,'GRAD' 0,'opsz' 24;
      opacity:.95;
    }
    .pvOfflineTitle{
      margin:0;
      font-weight: 900;
      letter-spacing:.08em;
      text-transform: uppercase;
      font-size: clamp(16px, 1.6vw, 22px);
      color:#0f172a;
    }
    .pvOfflineText{
      margin:10px 0 0;
      color:#334155;
      font-weight:800;
      font-size: clamp(14px, 1.5vw, 18px);
      line-height:1.35;
      opacity:.92;
    }
    .pvOfflineHint{
      margin:10px 0 0;
      color:#475569;
      font-weight:900;
      font-size: clamp(12px, 1.2vw, 14px);
      letter-spacing:.08em;
      text-transform: uppercase;
      opacity:.75;
    }

    /* ===== progress acima do rodapé ===== */
    .pvFooterProgress{
      flex:0 0 auto;
      padding: 0 var(--pad);
      background:#fff;
    }

    /* ===== FOOTER (logo canto inferior direito) ===== */
    .pvFooter{
      flex:0 0 auto;
      height: var(--footerH);
      display:flex;
      align-items:center;
      justify-content:flex-end;
      padding: 10px var(--pad);
      background:#fff;
      gap: 12px;
      min-width:0;
    }
    .pvLogo{
      height: clamp(16px, 2.3vh, 22px);
      width:auto;
      display:block;
      opacity:.92;
    }

    @media (orientation: portrait){
      .pvMsgPrimary{ font-size: clamp(28px, 6.2vw, 56px); }
      .progressWrap{ width:min(980px, 88%); }
    }

    @media (prefers-reduced-motion: reduce){
      .pvMsgPrimary, .pvMsgSecondary{ transition:none; }
      .barFill{ transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="pvShell" id="panel" data-title="ORIENTAÇÕES">
    <header class="pvHeader">
      <div class="pvHeaderLeft">
        <div class="pvIconBadge" aria-hidden="true">
          <span class="material-symbols-outlined">info</span>
        </div>
        <div class="pvTitles">
          <h1 class="pvTitle" id="title"></h1>
        </div>
      </div>
    </header>

    <main class="pvMain">
      <div class="panel">
        <section class="card" aria-label="Cartão de orientações" id="card">
          <div class="cardHeader">
            <div class="label">BOAS PRÁTICAS</div>
            <div class="toggleDots" aria-hidden="true">
              <div class="tdot active" id="dotA"></div>
              <div class="tdot" id="dotB"></div>
            </div>
          </div>

          <div class="cardBody" id="stage">
            <div class="pvMsgBox">
              <p class="pvMsgPrimary" id="msgPrimary">Aguarde ser chamado</p>
              <p class="pvMsgSecondary" id="msgSecondary">Acompanhe as informações exibidas neste painel</p>

              <div class="progressWrap" aria-hidden="true">
                <div class="divider"><div class="barFill" id="barFill"></div></div>
              </div>
            </div>
          </div>

          <!-- OFFLINE OVERLAY (sem badge de online/offline) -->
          <div class="pvOffline" id="offlineLayer" aria-hidden="true">
            <div class="pvOfflineCard" role="status" aria-label="Modo offline">
              <div class="pvOfflineIcon" aria-hidden="true">
                <span class="material-symbols-outlined">wifi_off</span>
              </div>
              <div>
                <p class="pvOfflineTitle">MODO OFFLINE</p>
                <p class="pvOfflineText">
                  Sem conexão com a internet no momento. O painel continuará exibindo informações locais e será retomado automaticamente quando a conexão voltar.
                </p>
                <p class="pvOfflineHint">verificando conexão…</p>
              </div>
            </div>
          </div>

        </section>
      </div>
    </main>

    <div class="pvFooterProgress" aria-hidden="true">
      <div class="divider"><div class="barFill" id="cycleFill"></div></div>
    </div>

    <footer class="pvFooter" aria-label="Rodapé">
      <img class="pvLogo" src="assets/logo-pontoview.png" alt="PontoView" onerror="this.style.display='none'">
    </footer>
  </div>

  <script>
    /***********************
     * CONFIG
     ***********************/
    const ROTATE_EVERY_MS = 20000;
    const TRANSITION_MS = 520;

    const SECONDARY_MODE = "rotate"; // "static" | "none" | "rotate"
    const SECONDARY_STATIC_TEXT = "Acompanhe as informações exibidas neste painel";

    const ORIENTACOES = [
      "Respeite a ordem de atendimento",
      "Aguarde ser chamado",
      "Em caso de dúvidas, procure um atendente",
      "Mantenha seus dados atualizados",
      "Confira as informações exibidas no local",
      "Atenção aos avisos disponíveis neste ambiente",
      "Mantenha o ambiente organizado",
      "Respeite o espaço das outras pessoas",
      "Evite falar ao celular em voz alta",
      "Mantenha o volume do celular no modo silencioso",
      "Colabore para um ambiente mais agradável",
      "Seja gentil e paciente",
      "Cuide de seus pertences pessoais",
      "Este ambiente pode ser monitorado",
      "Atenção à sinalização do local",
      "Em caso de emergência, siga as orientações da equipe",
      "Mantenha as áreas de circulação livres",
      "Evite correr em áreas internas",
      "Higienize as mãos sempre que possível",
      "Utilize álcool em gel quando disponível",
      "Caso não se sinta bem, informe um responsável",
      "Colabore com as medidas de segurança do local",
      "Respeito é fundamental para uma boa convivência",
      "A colaboração de todos faz a diferença",
      "Pequenas atitudes tornam o ambiente melhor",
      "Sua compreensão é importante"
    ];

    const SECONDARIAS = [
      "Obrigado por colaborar.",
      "Sua atenção faz a diferença.",
      "Siga a sinalização do local.",
      "Em caso de dúvida, procure a equipe.",
      "Aguarde as próximas informações."
    ];

    /***********************
     * ELEMENTOS
     ***********************/
    const stage = document.getElementById("stage");
    const msgPrimary = document.getElementById("msgPrimary");
    const msgSecondary = document.getElementById("msgSecondary");

    const offlineLayer = document.getElementById("offlineLayer");

    // progress interno (no card)
    const barFill = document.getElementById("barFill");
    // progress do ciclo (linha acima do rodapé)
    const cycleFill = document.getElementById("cycleFill");

    // dots
    const dotA = document.getElementById("dotA");
    const dotB = document.getElementById("dotB");

    /***********************
     * TITLE
     ***********************/
    document.getElementById("title").textContent =
      document.getElementById("panel").dataset.title || "ORIENTAÇÕES";

    /***********************
     * UTIL
     ***********************/
    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    /***********************
     * ROTATION (mensagens)
     ***********************/
    let pool = shuffle(ORIENTACOES);
    let idx = 0;
    let lastText = null;

    function nextText(){
      if(idx >= pool.length){
        pool = shuffle(ORIENTACOES);
        idx = 0;
      }
      let t = pool[idx++];
      if(t === lastText && pool.length > 1){
        if(idx >= pool.length){ pool = shuffle(ORIENTACOES); idx = 0; }
        t = pool[idx++];
      }
      lastText = t;
      return t;
    }

    function pickSecondary(){
      if(SECONDARY_MODE === "none") return "";
      if(SECONDARY_MODE === "static") return SECONDARY_STATIC_TEXT;
      return SECONDARIAS[Math.floor(Math.random()*SECONDARIAS.length)];
    }

    // progress interno + ciclo
    let rotStart = performance.now();

    function setProgressWidths(now){
      const p = ((now - rotStart) % ROTATE_EVERY_MS) / ROTATE_EVERY_MS;
      const w = Math.max(2, p * 100);
      barFill.style.width = `${w}%`;
      cycleFill.style.width = `${w}%`;
      requestAnimationFrame(setProgressWidths);
    }
    requestAnimationFrame(setProgressWidths);

    function setMessage(primary, secondary){
      stage.classList.add("pvFadeOut");
      setTimeout(() => {
        msgPrimary.textContent = primary;

        const sec = (secondary || "").trim();
        if(sec){
          msgSecondary.style.display = "";
          msgSecondary.textContent = sec;
        }else{
          msgSecondary.style.display = "none";
        }

        stage.classList.remove("pvFadeOut");
      }, TRANSITION_MS);
    }

    function flipDots(){
      const aActive = dotA.classList.contains("active");
      dotA.classList.toggle("active", !aActive);
      dotB.classList.toggle("active", aActive);
    }

    function rotateOnce(){
      rotStart = performance.now();
      flipDots();
      setMessage(nextText(), pickSecondary());
    }

    // start
    setMessage(nextText(), pickSecondary());
    rotStart = performance.now();
    setInterval(rotateOnce, ROTATE_EVERY_MS);

    /***********************
     * OFFLINE OVERLAY (sem badge)
     ***********************/
    function setOfflineOverlay(){
      const isOnline = navigator.onLine;
      offlineLayer.style.display = isOnline ? "none" : "flex";
      offlineLayer.setAttribute("aria-hidden", isOnline ? "true" : "false");
    }

    setOfflineOverlay();
    window.addEventListener("online", setOfflineOverlay);
    window.addEventListener("offline", setOfflineOverlay);
    setInterval(setOfflineOverlay, 5000);
  </script>
</body>
</html>
